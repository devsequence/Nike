define(["classnames","react","rendering-engine-api","z-shop-event-bus"],(function(e,t,n,a){return(self.renderingEngineWebpackJsonp=self.renderingEngineWebpackJsonp||[]).push([[7461],{64443:function(){window.__RENDERING_ENGINE_TRANSLATION_KEYS__={...window.__RENDERING_ENGINE_TRANSLATION_KEYS__,"information-banner":["header.usp.chat.title","header.usp.chat","header.usp.shipping.title","header.usp.shipping.AbTest","header.usp.retour.title","header.usp.retour","main.close"]}},58591:function(e,t,n){"use strict";n.r(t),n.d(t,{EVENT_BANNER_CANCEL_LINK:function(){return R},EVENT_BANNER_CLICK_LINK:function(){return I},default:function(){return M}});var a=n(82151),o=n(12650),r=n(37798),i=n(12604),s=n(22303),c=n.n(s),l=n(68747),u=n(85234),d=n(16197),m=n(23087),p=n(98376),h=n(56766),f=n(51535),g=n(72279),b=n(90240),_=n(9543),E=n(14641);const N="{#countdown}";function y(e){return e<10?"0"+e:String(e)}function k(e,t){const n=function(e,t){if(!t)return"";const n=Date.parse(t);if(isNaN(n))return"";const a=Math.max(n-e,0),o=Math.floor(a/1e3);return[Math.floor(o/3600),Math.floor(o/60)%60,o%60].map(y).join(":")}(t,e.publicationEnd);return e.text.replace(N,n)}var x=e=>{let{onClose:t,onLinkClick:n,onLoad:a,banner:r}=e;o.useEffect(a,[]);const[i,s]=o.useState(Date.now());o.useEffect((()=>{if(r.text.includes(N)){const e=setTimeout((()=>s(Date.now())),1e3);return()=>clearTimeout(e)}}));const y=r.text.includes(N)?k(r,i):r.text;return o.createElement("div",{"data-testid":"information-banner",className:E.tz,style:{background:r.backgroundColor,maxWidth:"100vw"}},o.createElement("div",{className:l.eCg},o.createElement("div",{className:c()(_.wZ,l.O7B)},o.createElement("div",{className:c()(b.Iu,l.T5m,l.tfz,l.czu,l.i2P,u.cRY,u.yyM)},o.createElement(d.ZP,{tag:"p",preset:m.j3.bodyExtraSmall,font:m.Zx.sansSerif,dangerouslySetInnerHTML:{__html:y.replace("<a href",'<a style="text-decoration:none" href')},style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"},onClick:e=>{"A"===e.target.tagName.toUpperCase()&&(e.preventDefault(),n())}})),r.isCloseable&&o.createElement("div",{style:{paddingRight:0},className:c()(l.T5m,l.w7R,b.C0)},o.createElement(f.Z,{"aria-label":__("main.close"),preset:g.Wn.transparent,label:__("main.close"),size:"small",onClick:t,type:"button"},o.createElement(h.Z,{src:p.Z,style:{width:16,height:16}}))))))},C=n(56926);function S(e){return{name:C.eF,context:e}}const v="header";function T(e){return t={customCategory:v,customLabel:"infobanner."+e},{name:C.RX,context:t};var t}var w=n(8779),L=n(57575);var B=e=>{let{track:t}=e;return o.createElement("div",{"data-testid":"usp-bar",className:c()(L.ROZ,w.kO,w.QA)},o.createElement("div",{className:l.eCg},o.createElement("div",{className:c()(l.O7B,_.wZ),style:{height:"32px",lineHeight:"32px"}},o.createElement(d.ZP,{className:c()(l.T5m,l.pQ6,b.WJ,L.xSJ),preset:m.j3.bodyExtraSmallBold,color:m.d9.secondary,key:"chat",title:__("header.usp.chat.title"),dangerouslySetInnerHTML:{__html:__("header.usp.chat")},onClick:()=>t(S({customCategory:v,customLabel:"usp.support"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}),o.createElement(d.ZP,{className:c()(l.T5m,l.pQ6,b.Iu,L.xSJ),preset:m.j3.bodyExtraSmallBold,color:m.d9.secondary,key:"shipping",title:__("header.usp.shipping.title"),dangerouslySetInnerHTML:{__html:__("header.usp.shipping.AbTest")},onClick:()=>t(S({customCategory:v,customLabel:"usp.shipping"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}),o.createElement(d.ZP,{className:c()(l.T5m,l.pQ6,b.C0,L.xSJ),preset:m.j3.bodyExtraSmallBold,color:m.d9.secondary,key:"retour",title:__("header.usp.retour.title"),dangerouslySetInnerHTML:{__html:__("header.usp.retour")},onClick:()=>t(S({customCategory:v,customLabel:"usp.returns"})),style:{WebkitFontSmoothing:"auto",MozOsxFontSmoothing:"auto"}}))))};const I="header:banner:click-link",R="header:banner:cancel-link";var M=(0,a.tile)().withQueries((e=>{let{context:t,ruleData:n}=e;return{data:{query:i,variables:{url:t.navigation.url.href,navigationTargetGroup:t.intent.navigationTargetGroup},doNotBatch:!0}}})).withTracking((e=>({resolve:()=>({context:{id:e.entity.id}})}))).withProcessDependencies(((e,t)=>{let{tools:{cookies:n},ruleData:{hideUspBar:a}}=t;var o;const r=n.get("information_banner_closed")||{},i=null==e||null==(o=e.data)?void 0:o.informationBanner;return{action:"render",data:{informationBanner:i,closedBanners:r,isBannerClosed:!!i&&i.id in r,hideUspBar:a}}})).withRender((e=>{let{data:{informationBanner:t,isBannerClosed:n,closedBanners:i,hideUspBar:s},tools:{cookies:c,tracking:l}}=e;const[u,d]=o.useState(n),m=l.track,p=null==t?void 0:t.campaignName,h=Object.keys(i).filter((e=>{const t=i[e]||"";return new Date<new Date(t)})).reduce(((e,t)=>(e[t]=i[t]||"",e)),{});return t&&!u?o.createElement(x,{banner:t,onClose:()=>{(0,a.requestIdleCallback)((()=>{d(!0),(null==t?void 0:t.id)&&(i[t.id]=t.publicationEnd,c.set("information_banner_closed",{...h,[t.id]:t.publicationEnd},365),m(function(e){return S({customCategory:v,customActionSuffix:"close",customLabel:"infobanner."+e})}(p)))}))},onLoad:()=>{m(T(p))},onLinkClick:()=>{r.trigger(I,{banner:t}),m(function(e){return S({customCategory:v,customLabel:"infobanner."+e})}(p),{useBeacon:!0});const e=t.text.match(/<a\s+(?:[^>]*?\s+)?href='([^']*)'/),n=e&&e[1];if(n){let e=!1;r.on(R,(()=>{e=!0})),setTimeout((()=>{e||(window.location.href=n)}),200)}}}):s?null:o.createElement(B,{track:m})}))},12604:function(e){e.exports={id:"58e717ba99b1eba45844d73d4912779735e9107fa0fe96814bc67f234c330c2a"}},22303:function(t){"use strict";t.exports=e},12650:function(e){"use strict";e.exports=t},82151:function(e){"use strict";e.exports=n},37798:function(e){"use strict";e.exports=a}},function(e){var t=function(t){return e(e.s=t)};return e.O(0,[2782],(function(){return t(64443),t(58591)})),e.O()}])}));
//# sourceMappingURL=https://zalando.de/dev/source-maps/information-banner/index-4ba6ec6b3f31095061d8.map